<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ - FunLand</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .admin-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        form {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .alert {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <nav>
            <a href="/admin">üìä –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a> |
            <a href="/admin/knowledge">üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</a> |
            <a href="/admin/logs">üìú –õ–æ–≥–∏</a> |
            <a href="/admin/suggestions">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏</a> |
            <a href="/admin/logout">üö™ –í—ã—Ö–æ–¥</a>
        </nav>

        <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏</h1>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É</h2>
        <form method="POST" action="/admin/suggestions/add">
            <div>
                <label><strong>–¢–µ–º–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏:</strong></label>
                <input type="text" name="topic" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 'vr', '–±–∞—Ç—É—Ç—ã'" required>
                <small>–¢–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—É –∏–∑ –º–µ–Ω—é</small>
            </div>
            
            <div>
                <label><strong>–í–æ–ø—Ä–æ—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong></label>
                <input type="text" name="question" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, '—Å—Ç–æ–∏–º–æ—Å—Ç—å vr'" required>
            </div>
            
            <div>
                <label><strong>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏:</strong></label>
                <input type="text" name="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, '–¶–µ–Ω—ã', '–ò–≥—Ä—ã'" required>
            </div>
            
            <div>
                <label><strong>–û—Ç–≤–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏:</strong></label>
                <textarea name="answer" placeholder="–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å..." rows="4" required></textarea>
            </div>
            
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É</button>
        </form>

        <h2>–°–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫</h2>
        {% if suggestion_map %}
            <table>
                <thead>
                    <tr>
                        <th>–¢–µ–º–∞</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏</th>
                        <th>–í–æ–ø—Ä–æ—Å</th>
                        <th>–û—Ç–≤–µ—Ç</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for topic, suggestions in suggestion_map.items() %}
                        {% for suggestion in suggestions %}
                            <tr>
                                <td>{{ topic }}</td>
                                <td>{{ suggestion.title }}</td>
                                <td>{{ suggestion.question }}</td>
                                <td>
                                    {% if suggestion.answer|length > 50 %}
                                        {{ suggestion.answer[:50] }}...
                                    {% else %}
                                        {{ suggestion.answer }}
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="/admin/suggestions/delete/{{ suggestion.id }}" 
                                       onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø–æ–¥—Å–∫–∞–∑–∫—É?')">–£–¥–∞–ª–∏—Ç—å</a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫</p>
        {% endif %}
    </div>
</body>
</html>