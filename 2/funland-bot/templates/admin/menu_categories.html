<!-- templates/admin/menu_categories.html -->
{% extends "admin/base.html" %}
{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏ –º–µ–Ω—é{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="row">
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏) –º–µ–Ω—é</h1>
                <a href="{{ url_for('admin_menu') }}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –º–µ–Ω—é</a>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                            {{ message | safe }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ç–µ–º—ã -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ç–µ–º—É</h5>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('add_menu_category') }}">
                        <div class="mb-3">
                            <label for="categoryKey" class="form-label">–ö–ª—é—á –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ª–∞—Ç–∏–Ω–∏—Ü–∞, —Ü–∏—Ñ—Ä—ã, _)</label>
                            <input type="text" class="form-control" id="categoryKey" name="category_key" required
                                   pattern="[a-z0-9_]+" title="–¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ, —Ü–∏—Ñ—Ä—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ">
                            <div class="form-text">–ù–∞–ø—Ä–∏–º–µ—Ä: entertainment, kids_zone, corporate_events</div>
                        </div>
                        <div class="mb-3">
                            <label for="categoryName" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                            <input type="text" class="form-control" id="categoryName" name="category_name" required>
                            <div class="form-text">–ù–∞–ø—Ä–∏–º–µ—Ä: üé≠ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, üë∂ –î–µ—Ç—Å–∫–∞—è –∑–æ–Ω–∞, üè¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤—ã</div>
                        </div>
                        <button type="submit" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–º—É</button>
                    </form>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º -->
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–º—ã</h5>
                </div>
                <div class="card-body">
                    {% if categories %}
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr><th>–ö–ª—é—á</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–¢–∏–ø</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr>
                            </thead>
                            <tbody>
                                {% for key, name in categories.items() %}
                                <tr>
                                    <td><code>{{ key }}</code></td>
                                    <td>{{ name }}</td>
                                    <td>
                                        {% if key in ['attractions', 'events', 'services', 'info'] %}
                                            <span class="badge bg-primary">–°–∏—Å—Ç–µ–º–Ω–∞—è</span>
                                        {% else %}
                                            <span class="badge bg-success">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if key not in ['attractions', 'events', 'services', 'info'] %}
                                        <a href="{{ url_for('delete_menu_category', key=key) }}" class="btn btn-danger btn-sm"
                                           onclick="return confirm('–£–¥–∞–ª–∏—Ç—å {{ name }} ({{ key }})?')">
                                            –£–¥–∞–ª–∏—Ç—å
                                        </a>
                                        {% else %}
                                        <span class="text-muted">–°–∏—Å—Ç–µ–º–Ω–∞—è</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="alert alert-info">–ù–µ—Ç —Ç–µ–º.</div>
                    {% endif %}
                </div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö -->
            <div class="card mt-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö</h5>
                </div>
                <div class="card-body">
                    <p>–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –º–µ–Ω—é:</p>
                    <ul>
                        <li><strong>attractions</strong> - –ê—Ç—Ç—Ä–∞–∫—Ü–∏–æ–Ω—ã (VR, –±–∞—Ç—É—Ç—ã, –Ω–µ—Ä—Ñ)</li>
                        <li><strong>events</strong> - –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è, –≤—ã–ø—É—Å–∫–Ω—ã–µ)</li>
                        <li><strong>services</strong> - –£—Å–ª—É–≥–∏ (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–Ω–∏–º–∞—Ç–æ—Ä—ã)</li>
                        <li><strong>info</strong> - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ü–µ–Ω—ã, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –ø—Ä–∞–≤–∏–ª–∞)</li>
                    </ul>
                    <p class="text-muted mb-0">–ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∏ –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë.</p>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}